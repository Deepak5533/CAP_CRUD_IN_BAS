sap.ui.define(["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("crud.controller.View1",{onInit(){},selected:function(){var e=this.getView().byId("table");var t=e.getSelectedItem();if(t){this.byId("edit").setEnabled(true)}else{this.byId("edit").setEnabled(false)}},create:function(){this.getView().byId("dialog").open()},async save(){try{var e=this.byId("name").getValue();var t=this.byId("country").getValue();if(!t){this.byId("country").setValueState("Error");this.byId("country").setPlaceholder("Enter the field");return}var i={name:e,country:t};var a=this.getView().byId("table");var r=a.getBinding("items");await r.create(i);this.getView().byId("dialog").close();r.refresh();this._cleardialoginput()}catch(e){sap.m.MessageBox.error("Create failed: "+e.message)}},_cleardialoginput:function(){this.byId("id").setValue("");this.byId("name").setValue("");this.byId("country").setValue("")},cancel:function(){this.byId("dialog").close();this._cleardialoginput()},edit:function(){var e=this.getView().byId("table");var t=e.getSelectedItem();var i=t.getBindingContext();this._Ocontext=i;var a=i.getObject();var r=a.ID;var n=a.name;var l=a.country;this.byId("editname").setValue(n);this.byId("editcountry").setValue(l);this.byId("editdialog").open()},editcancel:function(){this.byId("editdialog").close();_this.cleardialoginput()},update:function(){var e=this._Ocontext;e.setProperty("name",this.byId("editname").getValue());e.setProperty("country",this.byId("editcountry").getValue());this.byId("editdialog").close()},delete:function(){var e=this.byId("table");var t=e.getSelectedItem();var i=t.getBindingContext();i.delete()},filterid:function(e){var t=e.getParameter("value");console.log(t);var t=this.getView().byId("filterid").getValue();console.log(t);var i=this.byId("table").getBinding("items");if(t){var a=new sap.ui.model.Filter({path:"ID",operator:sap.ui.model.FilterOperator.EQ,value1:t});i.filter(a)}else{i.filter([])}},filtername:function(e){var t=e.getParameter("value");if(!t){var i=this.getView().byId("table");i.getBinding("items").filter([])}},namefilter:function(e){var t=this.getView().byId("table");var i=t.getItems();var a=[];for(let e=0;e<i.length;e++){var r=i[e].getBindingContext().getObject().country;if(!a.includes(r)){a.push(r)}}var n=new sap.ui.model.json.JSONModel({country:a});this.getView().setModel(n,"countryModel");if(!this._dialogbox){this._dialogbox=sap.ui.xmlfragment("crud.view.filtercountry",this);this.getView().addDependent(this._dialogbox)}this._dialogbox.open()},onCountrySelected:function(e){var t=e.getParameter("listItem");var i=t.getBindingContext("countryModel").getObject();console.log(i);var a=this.getView().byId("table");var r=a.getBinding("items");if(i){var n=new sap.ui.model.Filter({path:"country",operator:sap.ui.model.FilterOperator.Contains,value1:i});r.filter([n]);this.getView().byId("filtercountryinput").setValue(i)}else{r.filter([])}this._dialogbox.close()}})});
//# sourceMappingURL=View1.controller.js.map